<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Disease Detection</title>

    <!-- Bootstrap & Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/CSS/style.css">
    <link rel="stylesheet" href="/CSS/utility.css">
    <link rel="stylesheet" href="/CSS/weather.css">
    <link rel="stylesheet" href="/CSS/crop.css">

</head>

<body>
    <%- include("navbar"); %>

        <!-- Hero Section -->
        <div class="container-fluid hero-section text-center py-5"
            style="background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.3)), url('/images/bg2.png') no-repeat center center/cover;">
            <div class="container">
                <h1 class="display-4 fw-bold text-white">üåø Welcome to Crop Monitoring</h1>
                <p class="lead text-white">Empowering Farmers with Smart Agriculture Solutions</p>
                <a href="#crop-monitoring" class="btn btn-light btn-lg mt-3 fw-bold shadow-lg">üöÄ Explore Features</a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container-fluid my-5 main-content">
            <!-- Sidebar -->
            <!-- Sidebar -->
            <div class="col-md-3 bg-light p-4 shadow-sm rounded mt-5"
                style="max-height: 140vh; overflow-y: scroll; border-radius: 10px; box-shadow: 3px 3px 10px rgba(0,0,0,0.1);">

                <!-- User Info -->
                <div class="text-center mb-3 p-3 shadow-sm rounded" style="background: #fff;">
                    <h4 class="text-dark fw-bold">üë§ Welcome, <span id="username1"><%- nameOfuser %></span></h4>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex flex-column gap-3">
                    <button class="btn btn-primary py-3 fw-bold shadow-sm rounded"
                        onclick="window.open('http://localhost:3000/cropMonitoring/crop/Community', '_blank')">
                        Community Section
                    </button>
                    <button class="btn btn-success py-3 fw-bold shadow-sm rounded"
                        onclick="window.open('http://localhost:3000/cropMonitoring/detailed/report', '_blank')">
                        Detailed Insights</button>
                    <button class="btn btn-warning py-3 fw-bold shadow-sm rounded">Experts Talk</button>
                    <button class="btn btn-danger py-3 fw-bold shadow-sm rounded"
                        onclick="window.open('http://localhost:3000/Contact/us', '_blank')">‚ùì Help & Support</button>
                </div>

                <!-- User Searches List -->
                <div class="mt-4">
                    <h5 class="text-success fw-bold">üîç Previous Searches</h5>
                    <ul id="search-history" class="list-unstyled bg-white p-3 rounded shadow-sm w-100"
                        style="max-height: 60vh; overflow-y: auto; border: 1px solid #ddd;">
                        <li class="text-muted text-center">No searches yet...</li>
                    </ul>
                </div>
            </div>

            <!-- Main Content Area -->
<!-- Main Content Area -->
 <div class="flex">
<div class="d-flex bg-success text-center border-rounded text-align text-white fw-bold"><h2 style="text-align: center;">Related Images of <%= crop %> and the disease <%= disease %>
</h2></div>
<div id="image-container_webScrap">
    <% if (imageURLS.length> 0) { %>
        <% imageURLS.forEach(url=> { %>
            <div class="image-box" onclick="openLightbox('<%= url %>')">
                <img src="<%= url %>" alt="Crop Disease Image">
            </div>
            <% }); %>
                <% } else { %>
                    <p style="text-align: center; width: 100%;">No images found.</p>
                    <% } %>
</div>
</div>
<!-- Lightbox Modal -->
<div id="lightbox" onclick="closeLightbox()">
    <span id="lightbox-close">&times;</span>
    <img id="lightbox-img" style="scale: 2" src="" alt="Expanded Image">
</div>
</div>

</div>
<%- include("cropMonitor"); %>
    <%- include("footer"); %>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/js/script.js"></script>
        <script src="/js/crop.js"></script>
        <script src="/js/crop2.js"></script>
        <script>
            function openLightbox(imageSrc) {
                document.getElementById('lightbox-img').src = imageSrc;
                document.getElementById('lightbox').style.display = 'flex';
            }

            function closeLightbox() {
                document.getElementById('lightbox').style.display = 'none';
            }
        </script>
        </body>

        </html>